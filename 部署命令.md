# 小白式部署命令（复制粘贴到终端执行）

下面按「选一种方式」来做，从头到尾按顺序复制粘贴即可。

---

## 方式一：本机跑起来给别人访问（最快）

在**你电脑**上打开终端，进入项目目录后执行：

```bash
cd /Users/yufei/github_video_agent/test
npm install
npm run seed
npm start
```

浏览器打开：**http://localhost:3000**  
别人要访问你的电脑，需要和你同一 WiFi，访问：**http://你的电脑IP:3000**（在终端输入 `ifconfig` 或 `ipconfig` 看 IP）。

停止服务：在终端按 **Ctrl + C**。

---

## 方式二：用 Railway 发布到公网（免费、有链接）

### 第一步：把代码推到 GitHub

在终端执行（已装 Git 的情况下）：

```bash
cd /Users/yufei/github_video_agent/test
git init
git add .
git commit -m "init"
```

去 [github.com](https://github.com) 登录 → 点 **New repository** 新建一个空仓库（不要勾选 README），记下仓库地址，例如：`https://github.com/你的用户名/county-random.git`  
然后执行（把下面地址换成你的仓库地址）：

```bash
git remote add origin https://github.com/你的用户名/county-random.git
git branch -M main
git push -u origin main
```

### 第二步：在 Railway 部署

1. 浏览器打开：**https://railway.app**
2. 点 **Login** → 选 **Login with GitHub** 登录
3. 点 **New Project** → 选 **Deploy from GitHub repo**
4. 选你刚推送的仓库（如 county-random）→ 点 **Deploy Now**
5. 部署开始后，点进这个项目 → 点 **Settings** → 找到 **Deploy** 或 **Build**：
   - **Start Command** 填：`npm run seed && npm start`
   - 没有 Start Command 就保持默认，Railway 会用 `npm start`
6. 再点 **Settings** → **Networking** → **Generate Domain**，会生成一个链接，例如：`https://xxx.up.railway.app`

用这个链接就能在公网访问你的项目。

---

## 方式三：自己有云服务器（阿里云/腾讯云等）

假设你已经有一台 Linux 服务器，并知道它的 IP（例如 `123.45.67.89`）。

### 在你自己电脑上：把代码打包上传

```bash
cd /Users/yufei/github_video_agent/test
npm run seed
```

（确保本地有 `data/counties.db`，可选：若跑过爬虫，保证 `assets/`、`data/crawled-images.json` 也在）

然后打包（在项目上一级目录执行）：

```bash
cd /Users/yufei/github_video_agent
tar -czvf test.tar.gz test
```

用 scp 上传（把 `123.45.67.89` 和 `root` 换成你服务器的 IP 和用户名）：

```bash
scp test.tar.gz root@123.45.67.89:/root/
```

### 在服务器上：解压并运行

用 SSH 登录服务器：

```bash
ssh root@123.45.67.89
```

登录成功后，在服务器终端里执行：

```bash
cd /root
tar -xzvf test.tar.gz
cd test
apt-get update && apt-get install -y nodejs npm
npm install --production
npm run seed
npm start
```

此时服务已在 3000 端口跑起来。浏览器访问：**http://123.45.67.89:3000**（把 IP 换成你的）。

要一直挂着跑，可以装 PM2（在服务器上执行）：

```bash
npm install -g pm2
cd /root/test
pm2 start server/index.js --name county-random
pm2 save
pm2 startup
```

之后服务会一直运行，关掉 SSH 也不会停。

---

## 常用命令速查

| 你想做的事           | 命令 |
|----------------------|------|
| 本地安装依赖         | `npm install` |
| 生成/更新数据库      | `npm run seed` |
| 启动服务             | `npm start` |
| 停止服务（本机）     | 终端里按 **Ctrl + C** |
| 看 PM2 是否在跑      | `pm2 list` |
| 停止 PM2 服务        | `pm2 stop county-random` |
| 重启 PM2 服务        | `pm2 restart county-random` |

---

如果你说下是「本机给人看」「Railway 公网」还是「自己的云服务器」，我可以按你选的方式再精简成最少几步命令。
